<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <title>Installation &mdash; Devise Documentation &mdash; </title>

    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/devise-marketing.css">
    <link rel="stylesheet" type="text/css" href="/css/highlightjs/github.css">

    <script type="text/javascript" src="/js/lib/jquery.min.js"></script>
    <script type="text/javascript" src="/js/lib/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/lib/modernizr-2.8.3.min.js"></script>
    <script type="text/javascript" src="/js/lib/highlight.pack.js"></script>
    <script type="text/javascript" src="/js/devise-documentation.js"></script>

</head>

<body id="documentation">
    <header>
        <div class="navbar navbar-fixed-top navbar-inverse">
            <div class="container navbar-inner">
                <a href="/"><img src="/imgs/devise-logo-mini.gif" width="140">
                <ul class="list-inline">
                    <li class="ml sp50"><a href="#REPLACE_HREF" class="fg mid-gray important">GitHub</a></li>
                    <li><a href="#REPLACE_HREF">API</a></li>
                    <li><a href="#REPLACE_HREF">Learn</a></li>
                    <li><a href="#REPLACE_HREF">Get Started</a></li>
                    <li><a href="#REPLACE_HREF">Home</a></li>
                </ul>
            </div>
        </div>
    </header>

    <div id="documentation-sidebar-wrapper" class="hidden-sm hidden-xs">

            <ul id="documentation-sidebar">
                <li >
                    <a href="/docs">About Devise</a>
                    <ul>
                        <li><a href="/docs#what-is-it">What Is It?</a></li>
                        <li><a href="/docs#couple-of-demos">Couple of Demos</a></li>
                    </ul>
                </li>
                                <li>
                <a href="/docs/1-about-this-documentation">About This Documentation</a>
                                            <ul>
                                                            <li><a href="/docs/1-about-this-documentation#unique-functionality">Unique Functionality</a></li>
                                                            <li><a href="/docs/1-about-this-documentation#achtung%21">Achtung!</a></li>
                                                            <li><a href="/docs/1-about-this-documentation#beer%21">Beer!</a></li>
                                                    </ul>
                                    </li>
                                <li class="active">
                <a href="/docs/2-installation">Installation</a>
                                            <ul>
                                                            <li class="active" ><a href="/docs/2-installation#installing-through-command-line">Installing through command line</a></li>
                                                            <li class="active" ><a href="/docs/2-installation#installing-through-the-browser">Installing through the browser</a></li>
                                                            <li class="active" ><a href="/docs/2-installation#environmental-configuration">Environmental Configuration</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/3-pages">Pages</a>
                                            <ul>
                                                            <li><a href="/docs/3-pages#pages-and-routing">Pages and Routing</a></li>
                                                            <li><a href="/docs/3-pages#creating-new-pages">Creating New Pages</a></li>
                                                            <li><a href="/docs/3-pages#managing-pages">Managing Pages</a></li>
                                                            <li><a href="/docs/3-pages#understanding-page-versions">Understanding page versions</a></li>
                                                            <li><a href="/docs/3-pages#sharing-an-unpublished-page-with-a-non-admin">Sharing An Unpublished Page With A Non-Admin</a></li>
                                                            <li><a href="/docs/3-pages#working-with-the-calendar">Working with the Calendar</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/4-templates">Templates</a>
                                            <ul>
                                                            <li><a href="/docs/4-templates#creating-new-templates">Creating New Templates</a></li>
                                                            <li><a href="/docs/4-templates#introduction-to-blade-syntax">Introduction to Blade Syntax</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/5-fields">Fields</a>
                                            <ul>
                                                            <li><a href="/docs/5-fields#creating-your-first-rando-editable-area">Creating Your First Rando Editable Area</a></li>
                                                            <li><a href="/docs/5-fields#simple-field">Simple Field</a></li>
                                                            <li><a href="/docs/5-fields#grouping-fields">Grouping Fields</a></li>
                                                            <li><a href="/docs/5-fields#collections-of-fields">Collections of Fields</a></li>
                                                            <li><a href="/docs/5-fields#editing-models">Editing Models</a></li>
                                                            <li><a href="/docs/5-fields#to-model-or-not-to-model">To Model Or Not To Model</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/6-fieldtypes">Field Types</a>
                                            <ul>
                                                            <li><a href="/docs/6-fieldtypes#audio">Audio</a></li>
                                                            <li><a href="/docs/6-fieldtypes#checkbox-group">Checkbox Group</a></li>
                                                            <li><a href="/docs/6-fieldtypes#checkbox">Checkbox</a></li>
                                                            <li><a href="/docs/6-fieldtypes#color">Color</a></li>
                                                            <li><a href="/docs/6-fieldtypes#date%2Ftime">Date/Time</a></li>
                                                            <li><a href="/docs/6-fieldtypes#file">File</a></li>
                                                            <li><a href="/docs/6-fieldtypes#html">HTML</a></li>
                                                            <li><a href="/docs/6-fieldtypes#images">Images</a></li>
                                                            <li><a href="/docs/6-fieldtypes#link">Link</a></li>
                                                            <li><a href="/docs/6-fieldtypes#map">Map</a></li>
                                                            <li><a href="/docs/6-fieldtypes#select">Select</a></li>
                                                            <li><a href="/docs/6-fieldtypes#text">Text</a></li>
                                                            <li><a href="/docs/6-fieldtypes#textarea">Textarea</a></li>
                                                            <li><a href="/docs/6-fieldtypes#video">Video</a></li>
                                                            <li><a href="/docs/6-fieldtypes#wysiwyg">WYSIWYG</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/7-permissions">Permissions</a>
                                            <ul>
                                                            <li><a href="/docs/7-permissions#preloaded-permission-rules">Preloaded Permission Rules</a></li>
                                                            <li><a href="/docs/7-permissions#implementing-in-templates">Implementing In Templates</a></li>
                                                            <li><a href="/docs/7-permissions#implementing-on-pages">Implementing On Pages</a></li>
                                                            <li><a href="/docs/7-permissions#implementing-in-routes">Implementing In Routes</a></li>
                                                            <li><a href="/docs/7-permissions#creating-new-permission-rules">Creating New Permission Rules</a></li>
                                                            <li><a href="/docs/7-permissions#creating-new-permission-conditions">Creating New Permission Conditions</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/8-menus">Menus</a>
                                            <ul>
                                                            <li><a href="/docs/8-menus#managing-menus">Managing Menus</a></li>
                                                            <li><a href="/docs/8-menus#implementing-menus">Implementing Menus</a></li>
                                                    </ul>
                                    </li>
                                <li>
                <a href="/docs/9-users-and-groups">Users &amp; Groups</a>
                                            <ul>
                                                            <li><a href="/docs/9-users-and-groups#building-a-philosophy-for-your-app">Building A Philosophy For Your App</a></li>
                                                            <li><a href="/docs/9-users-and-groups#managing-users">Managing Users</a></li>
                                                            <li><a href="/docs/9-users-and-groups#managing-groups">Managing Groups</a></li>
                                                    </ul>
                                    </li>
                            </ul>

    </div>

    <div class="container">

        <div class="row mb sp25" id="difficulty-buttons">
            <div class="col-md-offset-6 col-md-6 tar">
                <button id="beginner-btn" class="btn difficulty" data-difficulty="beginner">Beginner</button>
                <button id="advanced-btn" class="btn difficulty" data-difficulty="advanced">Advanced</button>
                <button id="all-btn" class="btn difficulty" data-difficulty="all">All</button>
            </div>
        </div>

        <div class="row">

            <div class="col-md-8 col-md-offset-4" id="documentation-content">

                <div class="row">
                    <div class="col-md-10 col-md-offset-1">

                        <h1>Installation</h1>

<blockquote>
  <blockquote>
    <blockquote>
      <h4>Work in Progress</h4>
      
      <p>Installation is one of the most important features of making a CMS accessible to developers. We want this process to be as simple as it can be to make it easy the first and thirty-first times you do it. With the huge changes that have come with Laravel 5 we are waiting for stability to work on the web-based installer and round out the command-line installer. Expect this note to be removed in 1.0.</p>
    </blockquote>
  </blockquote>
</blockquote>

<h2><a name="installing-through-command-line" class="ia"></a><a href="#environmental-configuration">#</a>Environmental Configuration</h2>

<p>Installation through the command line is as simple as:</p>

<pre><code class="bash">php artisan devise:install
</code></pre>

<p>Currently, this command simply runs these commands</p>

<pre><code class="bash">php artisan devise:migrate
php artisan devise:assets
php artisan devise:seed
</code></pre>

<h2>Installing through the browser</h2>

<blockquote>
  <blockquote>
    <blockquote>
      <h4>In Development</h4>
      
      <p>This feature will be upcoming in 1.0 (Mid March 2015)</p>
    </blockquote>
  </blockquote>
</blockquote>

<h2><a name="environmental-configuration" class="ia"></a><a href="#environmental-configuration">#</a>Environmental Configuration</h2>

<p>Below we will cover setting up Devise, Laravel and Homestead in an OSX environment. For more information on setting up Homestead please refer to the <a href="http://laravel.com/docs/4.2/homestead#installation-and-setup">Laravel documentation</a> or for Windows check out <a href="http://blog.teamtreehouse.com/laravel-homestead-on-windows">this video</a> on Treehouse.</p>

<h4>1. Add entry to /etc/hosts like a-so:</h4>

<pre><code class="bash">127.0.0.1 devise-example.com
</code></pre>

<h4>2. Add your site to your Homestead.yaml</h4>

<p>In you Homestead.yaml file (the main configuration file for Homestead) add an entry for devise-example.com and map it to the <strong>application's public directory</strong>. It should look similiar to this:</p>

<pre><code>    - map: devise-example.com
      to: /home/vagrant/Code/devise-example/public
</code></pre>

<blockquote>
  <blockquote>
    <h4>Watch out</h4>
    
    <p>Currently, in Homestead if you map the site incorrectly in the <code>to:</code> filepath that URL (devise-example.com) will need to be changed manually in the Nginx config file. Simply, changing it in the homestead config and reprovisioning doesn't seem to work. You can find this file by SSH'ing into your vagrant box and editing the file for your site entry. It is located (in this example) here: <code>/etc/nginx/sites-enabled/devise-example.com</code>. Just edit the <code>root</code> parameter's file path towards the top of the file. It should look something like this to get to it:</p>
  </blockquote>
</blockquote>

<h4>Only do the following if you have the problem listed above otherwise move to step 3.</h4>

<p>SSH into your vagrant box</p>

<pre><code class="bash">homestead ssh
</code></pre>

<p>Edit your configuration file (replace devise-example.com with whatever domain you are working on.)</p>

<pre><code class="bash">sudo vi /etc/nginx/sites-available/devise-example.com
</code></pre>

<p>Edit your root path (it should end with public)</p>

<pre><code class="bash">root /vagrant/whatever/whatever/site/public
</code></pre>

<h4>3. Provision the new site</h4>

<p><code>cd</code> into your Homestead directory (where homestead.yaml is located) and run "vagrant reload --provision". NOTE: If your vagrant box is not already up-and-running, you might need to run "vagrant up" rather than ".</p>

<h4>4. SSH into the Vagrant box</h4>

<p>While still in the Homestead directory, SSH into vagrant with the command "vagrant ssh."</p>

<h4>5. Set the application environment</h4>

<p>Next we will need to set the to application's environment to "local" with the listed steps below:</p>

<p>a. First, open the sites-available entry for devise-example.com by running <code>bash sudo vi /etc/nginx/sites-available/devise-example.com</code></p>

<p>b. Then find the text <code>bash location ~ \.php$ {</code></p>

<p>c. On the next line paste <code>bash fastcgi_param LARAVEL_ENV "local";</code></p>

<pre><code class="bash">    It should look like this:
    location ~ \.php$ {
        fastcgi_param LARAVEL_ENV "local";
        fastcgi_split_path_info ^(.+\.php)(/.+)$;
        fastcgi_pass unix:/var/run/php5-fpm.sock;
        fastcgi_index index.php;
        include fastcgi_params;
    }
</code></pre>

<p>d. Write to file and quit with ":wq" command
e. Restart nginx service by running "sudo service nginx restart"; now LARAVEL_ENV is set to "local."</p>

<p>All of the above steps can be found in more detail on the <a href="http://laravel.com/docs/4.2/homestead">Laravel documetation page on Homestead</a></p>

<h4>6. Run Migrations and Seeds</h4>

<ol>
<li>SSH into vagrant box by running "vagrant ssh" from the Homestead directory</li>
<li>Then cd into the root of devise-example application and run the following commands:</li>
</ol>

<pre><code class="bash">php artisan migrate --package="devisephp/cms" --env=local  (devisephp migrations)
php artisan migrate --env=local (application migrations)

php artisan db:seed --env=local --class="DeviseSeeder" (devisephp seeds)
php artisan db:seed --env=local  (application seeds)
</code></pre>

                    </div>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col-md-8 col-md-offset-4" id="documentation-pagination">

                <div class="row">

                    <div class="col-md-8 col-md-offset-2">
                                                    <nav class="article">
                                <ul class="list-unstyled">
                                                                            <li><a class="previous btn btn-info" href="/docs/1-about-this-documentation" title="About This Documentation">&#8592; About This Documentation</a></li>
                                                                                                                <li><a class="next btn btn-info" href="/docs/3-pages" title="Pages">Pages &#8594;</a></li>
                                                                    </ul>
                            </nav>
                                            </div>

                </div>

            </div>

        </div>

    </div>


    <footer class="tar">
        <div class="container open-sans tiny">
            <img class="mb sp8" src="/imgs/devise-logo-mini-black.gif" width="114" height="39" alt="Devise" />
            <p>Devise Logo and Devisephp.com<br>
               Copyright &copy 2015 <a href="http://lbm.co" class="strong" target="_blank">LBM</a><br><br>

               Devise content management system source code under <a href="http://opensource.org/licenses/MIT" target="_blank">MIT License</a>
            </p>
        </div>
    </footer>

    <script>hljs.initHighlightingOnLoad();</script>

</body>
</html>